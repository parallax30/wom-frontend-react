(()=>{var e={};e.id=698,e.ids=[698],e.modules={1132:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l,metadata:()=>c});var s=r(37413),a=r(77038),n=r(78661),i=r(3039),o=r(93690);let c={title:"Inversors Portal",description:"Wom"},l=async()=>{let e=await (0,o.$)("/admin");return(0,s.jsxs)("div",{className:"min-h-screen flex flex-col font-sans text-[#2D1540]",children:[(0,s.jsx)(a.Navbar,{menuItems:e.menu,user:e.user,urlLogo:e.logoHeader}),(0,s.jsx)("main",{className:"flex-grow",children:(0,s.jsx)(i.default,{})}),(0,s.jsx)(n.w,{contact:e.contact})]})}},3039:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/francico/Documents/code/wom-frontend-react/src/app/admin/UserAdmin.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/francico/Documents/code/wom-frontend-react/src/app/admin/UserAdmin.tsx","default")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7897:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var s=r(60687),a=r(43210),n=r(90296);function i(e){return(0,n.k5)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.034 8 8 119.033 8 256s111.034 248 248 248 248-111.034 248-248S392.967 8 256 8zm130.108 117.892c65.448 65.448 70 165.481 20.677 235.637L150.47 105.216c70.204-49.356 170.226-44.735 235.638 20.676zM125.892 386.108c-65.448-65.448-70-165.481-20.677-235.637L361.53 406.784c-70.203 49.356-170.226 44.736-235.638-20.676z"},child:[]}]})(e)}function o(e){return(0,n.k5)({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z"},child:[]}]})(e)}function c(e){return(0,n.k5)({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(e)}var l=r(67107);let d=e=>e.blocked?"Desactivado":e.confirmed?"Activo":"Pendiente Validaci\xf3n";function u(){let[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)(!0),[u,p]=(0,a.useState)(!1),[m,f]=(0,a.useState)(null),[b,x]=(0,a.useState)(null),[h,v]=(0,a.useState)("asc"),y=async()=>{try{n(!0);let e=await (0,l.lo)({}),r=e?.data||[];console.log("Fetched users:",r);let s=r.map(e=>({id:e.id,name:`${e.name??""} ${e.lastName??""}`.trim(),email:e.email,status:d(e)}));t(s)}catch(e){console.error("Error fetching users",e)}finally{n(!1)}},j=e=>{"actions"!==e&&(b===e?v("asc"===h?"desc":"asc"):(x(e),v("asc")))},g=[...e].sort((e,t)=>{if(!b)return 0;let r=String(e[b]).toLowerCase(),s=String(t[b]).toLowerCase();return r<s?"asc"===h?-1:1:r>s?"asc"===h?1:-1:0}),w=(e,t)=>{f({id:e,type:t}),p(!0)},P=async()=>{if(!m)return;let{id:e,type:t}=m;try{"delete"===t?await fetch(`http://136.110.180.2/cms/api/users/${e}`,{method:"DELETE",headers:{Authorization:"Bearer 01266ab0c49e4bc59faf3e13d6d89bf142dd85a6d684a819ab6b5ba81e1cc8315ea9a888f5bc76ce09f67edaa266b5cef01011899dc32464c221be5fd60307274a6c3557d1efb0d093ee5214d391a824330c0762de6881b6b28d2ef3cc61d0ab290b5c4e2c0615ff3fa2952636d82d1ff409eb78c4ee75a763f4b4bcb39f5fac"}}):await (0,l.vv)(e,{blocked:"block"===t});let r=await fetch(`http://136.110.180.2/api-helper/email/${t}`,{method:"POST",headers:{"Content-Type":"application/json","X-Internal-Token":"dRGvzVPcubf35EkhfEyZraf7dWSXHclqfCt5LeSDSikmQf59QJu66kYtE4vv6km9"},body:JSON.stringify({userId:e})}),s=await r.json();r.ok||console.error("Error en send mail:",s),await y()}catch(e){console.error("Action failed",e)}finally{p(!1),f(null)}},k=e=>{switch(e){case"Activo":return(0,s.jsx)("span",{className:"text-green-600 text-xs font-bold",children:"Activo"});case"Pendiente Validaci\xf3n":return(0,s.jsx)("span",{className:"text-yellow-500 text-xs font-bold",children:"Pendiente Validaci\xf3n"});case"Desactivado":return(0,s.jsx)("span",{className:"text-red-600 text-xs font-bold",children:"Desactivado"})}};return r?(0,s.jsx)("p",{className:"text-center py-10",children:"Loading..."}):(0,s.jsxs)("div",{className:"w-full px-6 py-10 mt-20",children:[(0,s.jsxs)("div",{className:"w-[80%] mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8 text-[#2D1540]",children:"User Administration"}),(0,s.jsx)("div",{className:"overflow-hidden border border-gray-300 rounded-md",children:(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsx)("tr",{className:"bg-purple-800 text-white text-left text-sm",children:[{key:"name",label:"User Name"},{key:"email",label:"User Email"},{key:"status",label:"State"},{key:"actions",label:"Actions"}].map(e=>(0,s.jsx)("th",{className:`py-3 px-4 ${"actions"!==e.key?"cursor-pointer":""}`,onClick:()=>j(e.key),children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[e.label,b===e.key&&(0,s.jsx)("span",{children:"asc"===h?"▲":"▼"})]})},e.key))})}),(0,s.jsx)("tbody",{children:g.map((e,t)=>(0,s.jsxs)("tr",{className:t%2==0?"bg-white":"bg-gray-100",children:[(0,s.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,s.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,s.jsx)("td",{className:"py-3 px-4",children:k(e.status)}),(0,s.jsx)("td",{className:"py-3 px-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>w(e.id,"approve"),title:"Approve",children:(0,s.jsx)(o,{size:20})}),(0,s.jsx)("button",{onClick:()=>w(e.id,"block"),title:"Block",children:(0,s.jsx)(i,{size:20})}),(0,s.jsx)("button",{onClick:()=>w(e.id,"delete"),title:"Delete",children:(0,s.jsx)(c,{size:20})})]})})]},e.id))})]})})]}),u&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-[350px]",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Confirm action"}),(0,s.jsxs)("p",{className:"mb-6 text-sm",children:["Are you sure you want to ",(0,s.jsx)("b",{children:m?.type})," this user?"]}),(0,s.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,s.jsx)("button",{onClick:()=>p(!1),className:"px-4 py-2 border rounded-md",children:"Cancel"}),(0,s.jsx)("button",{onClick:P,className:"px-4 py-2 bg-purple-700 text-white rounded-md",children:"Confirm"})]})]})})]})}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:e=>{"use strict";e.exports=require("assert")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},24495:(e,t,r)=>{Promise.resolve().then(r.bind(r,3039)),Promise.resolve().then(r.bind(r,77038))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32743:(e,t,r)=>{Promise.resolve().then(r.bind(r,7897)),Promise.resolve().then(r.bind(r,26454))},33873:e=>{"use strict";e.exports=require("path")},46178:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>l});var s=r(65239),a=r(48088),n=r(88170),i=r.n(n),o=r(30893),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);r.d(t,c);let l={children:["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1132)),"/Users/francico/Documents/code/wom-frontend-react/src/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,94431)),"/Users/francico/Documents/code/wom-frontend-react/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,54413)),"/Users/francico/Documents/code/wom-frontend-react/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/Users/francico/Documents/code/wom-frontend-react/src/app/admin/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},67107:(e,t,r)=>{"use strict";r.d(t,{kl:()=>n,lo:()=>a,vv:()=>i});let s=r(41858).A.create({baseURL:"http://136.110.180.2/cms/api"});s.interceptors.request.use(e=>{let t="01266ab0c49e4bc59faf3e13d6d89bf142dd85a6d684a819ab6b5ba81e1cc8315ea9a888f5bc76ce09f67edaa266b5cef01011899dc32464c221be5fd60307274a6c3557d1efb0d093ee5214d391a824330c0762de6881b6b28d2ef3cc61d0ab290b5c4e2c0615ff3fa2952636d82d1ff409eb78c4ee75a763f4b4bcb39f5fac";return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e,e=>(console.error("API error:",e),Promise.reject(e)));let a=e=>s.get("/users",e),n=e=>s.get(`/users/${e}`),i=(e,t)=>s.put(`/users/${e}`,t)},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},83997:e=>{"use strict";e.exports=require("tty")},90296:(e,t,r)=>{"use strict";r.d(t,{k5:()=>d});var s=r(43210),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=s.createContext&&s.createContext(a),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,s)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var s,a,n;s=e,a=t,n=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var s=r.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in s?Object.defineProperty(s,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):s[a]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>s.createElement(u,o({attr:l({},e.attr)},t),function e(t){return t&&t.map((t,r)=>s.createElement(t.tag,l({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:a,size:n,title:c}=e,d=function(e,t){if(null==e)return{};var r,s,a=function(e,t){if(null==e)return{};var r={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;r[s]=e[s]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),s.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:l(l({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&s.createElement("title",null,c),e.children)};return void 0!==n?s.createElement(n.Consumer,null,e=>t(e)):t(a)}},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[719,374,999,858,881],()=>r(46178));module.exports=s})();